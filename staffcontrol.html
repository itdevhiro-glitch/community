<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atlantis Event Control - Mocha Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <link rel="stylesheet" href="staffcontrol.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'mocha-dark': '#3C2A21',
                        'latte-light': '#F5E8C7',
                        'latte-darker': '#4E3C32',
                        'caramel-accent': '#8D6E63',
                        'text-dark': '#3C2A21',
                        'text-light': '#EFEBE9',
                        'mocha-highlight': '#A1887F',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-mocha-dark font-sans antialiased">
    
    <div id="loading-screen" class="fixed inset-0 flex flex-col items-center justify-center bg-mocha-dark z-50 transition-opacity duration-500">
        <i data-lucide="coffee" class="w-12 h-12 animate-spin-slow text-caramel-accent"></i>
        <p class="mt-4 text-xl font-medium text-text-light">Memuat Sistem Kontrol Atlantis...</p>
    </div>

    <div id="auth-page" class="hidden min-h-screen flex items-center justify-center p-4">
        <div class="bg-latte-light p-8 md:p-10 rounded-xl shadow-2xl w-full max-w-md border-t-8 border-caramel-accent transform transition-all duration-300 scale-95 opacity-0" id="login-form-card">
            <div class="text-center mb-6">
                <i data-lucide="coffee" class="w-8 h-8 text-caramel-accent mx-auto mb-2"></i>
                <h2 class="text-3xl font-extrabold text-text-dark">Sistem Kontrol Atlantis</h2>
                <p class="text-sm text-mocha-highlight mt-1">Gunakan akun admin atau otentikasi tim.</p>
            </div>

            <input type="email" id="login-email" placeholder="Email (cth: admin@atlantis.com)" class="p-3 w-full rounded-lg bg-gray-100 text-text-dark mb-4 border border-mocha-highlight focus:border-caramel-accent focus:bg-white transition duration-200">
            <input type="password" id="login-password" placeholder="Password" class="p-3 w-full rounded-lg bg-gray-100 text-text-dark mb-6 border border-mocha-highlight focus:border-caramel-accent focus:bg-white transition duration-200">
            
            <button id="login-button" class="caramel-button w-full px-4 py-3 rounded-lg font-bold shadow-md hover:shadow-lg">LOGIN ADMIN</button>
            <button id="anonymous-login-button" class="mt-4 w-full text-center text-sm text-caramel-accent hover:underline">Masuk sebagai Tim Biasa &rarr;</button>

            <p id="auth-error-message" class="text-red-500 text-sm mt-4 text-center hidden"></p>
        </div>
    </div>


    <div id="app-interface" class="hidden flex h-screen overflow-hidden text-text-light">

        <aside id="sidebar" class="sidebar bg-latte-darker w-16 md:w-64 space-y-6 py-7 px-2 fixed inset-y-0 left-0 transform -translate-x-full md:relative md:translate-x-0 transition duration-300 ease-in-out z-30 shadow-lg">
            <div class="flex items-center justify-center md:justify-start px-4">
                <i data-lucide="gem" class="w-6 h-6 text-caramel-accent"></i>
                <h1 class="text-xl font-extrabold ml-3 hidden md:inline text-latte-light">ATLANTIS</h1>
            </div>

            <div class="px-4 hidden md:block border-b border-mocha-highlight pb-4">
                <p class="text-xs font-semibold text-latte-light opacity-70">User ID:</p>
                <p id="current-user-id" class="text-xs truncate text-gray-400 font-mono">...</p>
                <p class="text-sm mt-2 font-extrabold text-latte-light">PERAN:</p>
                <p id="current-user-role" class="text-base font-bold text-caramel-accent">...</p>
            </div>

            <nav id="main-navigation">
                <a href="#" data-page="dashboard" class="nav-item flex items-center p-3 my-2 text-sm font-medium rounded-xl hover:bg-caramel-accent hover:text-white transition duration-150 text-latte-light">
                    <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
                    <span class="ml-4 hidden md:inline">Dashboard</span>
                </a>
                <a href="#" data-page="chat" class="nav-item flex items-center p-3 my-2 text-sm font-medium rounded-xl hover:bg-caramel-accent hover:text-white transition duration-150 text-latte-light">
                    <i data-lucide="message-square" class="w-5 h-5"></i>
                    <span class="ml-4 hidden md:inline">Chat Tim</span>
                </a>
                <a href="#" data-page="events" class="nav-item flex items-center p-3 my-2 text-sm font-medium rounded-xl hover:bg-caramel-accent hover:text-white transition duration-150 text-latte-light">
                    <i data-lucide="calendar-check" class="w-5 h-5"></i>
                    <span class="ml-4 hidden md:inline">Event & Tugas</span>
                </a>
                <a href="#" data-page="finance" class="nav-item flex items-center p-3 my-2 text-sm font-medium rounded-xl hover:bg-caramel-accent hover:text-white transition duration-150 text-latte-light">
                    <i data-lucide="banknote" class="w-5 h-5"></i>
                    <span class="ml-4 hidden md:inline">Keuangan & Vendor</span>
                </a>
                <a href="#" data-page="users" id="nav-item-users" class="nav-item hidden flex items-center p-3 my-2 text-sm font-medium rounded-xl hover:bg-caramel-accent hover:text-white transition duration-150 text-latte-light">
                    <i data-lucide="users" class="w-5 h-5"></i>
                    <span class="ml-4 hidden md:inline">Manajemen Pengguna</span>
                </a>
            </nav>

            <div class="absolute bottom-0 w-full px-4 pb-4">
                <button id="logout-button" class="flex items-center w-full p-2 text-sm font-medium text-red-400 rounded-lg hover:bg-red-600 hover:text-white transition duration-150">
                    <i data-lucide="log-out" class="w-6 h-6"></i>
                    <span class="ml-4 hidden md:inline font-semibold">Keluar</span>
                </button>
            </div>
        </aside>

        <main id="main-content" class="flex-1 overflow-y-auto transition duration-300 ease-in-out ml-0 md:ml-64 p-4 md:p-8">
            
            <button id="mobile-menu-button" class="md:hidden p-2 bg-latte-darker text-text-light hover:bg-caramel-accent rounded-md focus:outline-none mb-4 fixed top-4 left-4 z-40">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>

            <div id="page-content" class="w-full mt-10 md:mt-0">
                </div>
        </main>

        <div id="custom-modal" class="modal fixed inset-0 bg-black bg-opacity-75 z-[60] flex items-center justify-center opacity-0 pointer-events-none">
            <div id="modal-content" class="modal-content bg-latte-light p-6 rounded-xl shadow-2xl w-full max-w-sm border-t-4 border-caramel-accent">
                <h3 id="modal-title" class="text-xl font-bold mb-4 text-text-dark">Pesan</h3>
                <p id="modal-body" class="text-text-dark mb-6">Isi pesan di sini.</p>
                <div class="flex justify-end space-x-3">
                    <button id="modal-cancel" class="px-4 py-2 text-sm font-medium rounded-lg text-text-dark border border-gray-300 hover:bg-gray-200 transition">Batal</button>
                    <button id="modal-confirm" class="px-4 py-2 text-sm font-medium rounded-lg caramel-button">OK</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-database-compat.js"></script>

    <script type="module" src="staffcontrol.js"></script>
</body>
</html>